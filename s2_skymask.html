<HTML>
<HEAD>
   <TITLE> program s2_skymask (generated by f90doc) </TITLE>
  <LINK rel="stylesheet" href="stylesheet.css" type="text/css" /> </HEAD>
<H1> Program s2_skymask </H1>
<PRE>program s2_skymask

        ! Uses
    use <A HREF="s2_types_mod.html">s2_types_mod</A>
    use <A HREF="s2_sky_mod.html">s2_sky_mod</A>
    use <A HREF="s2_error_mod.html">s2_error_mod</A>

        ! Calls
    call parse_options
    call s2_error
    call s2_sky_free
    call s2_sky_get_map
    call s2_sky_io_fits_write
    call s2_sky_write_map_file

        ! Variables
    real (kind=s2_sp), parameter :: <A HREF="s2_skymask.html#var_fits_display_grey_magic_number">FITS_DISPLAY_GREY_MAGIC_NUMBER</A> = -1.6375e30
    real (kind=s2_sp), parameter :: <A HREF="s2_skymask.html#var_zero_tol">ZERO_TOL</A> = 1e-5
    character (len=*), parameter :: <A HREF="s2_skymask.html#var_map_file">MAP_FILE</A> = 'map'
    character (len=*), parameter :: <A HREF="s2_skymask.html#var_sky_file">SKY_FILE</A> = 'sky'
    integer :: <A HREF="s2_skymask.html#var_file_type">file_type</A> = S2_SKY_FILE_TYPE_MAP
    integer :: <A HREF="s2_skymask.html#var_ext">ext</A> = 1
    character (len=S2_STRING_LEN) :: <A HREF="s2_skymask.html#var_filename_sky">filename_sky</A>
    character (len=S2_STRING_LEN) :: <A HREF="s2_skymask.html#var_filename_mask">filename_mask</A>
    character (len=S2_STRING_LEN) :: <A HREF="s2_skymask.html#var_filename_out">filename_out</A>
    character (len=S2_STRING_LEN) :: <A HREF="s2_skymask.html#var_file_type_str">file_type_str</A> = MAP_FILE
    type (s2_sky) :: <A HREF="s2_skymask.html#var_sky">sky</A>
    type (s2_sky) :: <A HREF="s2_skymask.html#var_mask">mask</A>
    type (s2_sky) :: <A HREF="s2_skymask.html#var_prod">prod</A>
    real (kind=s2_sp), allocatable, dimension (:) :: <A HREF="s2_skymask.html#var_mask_map">mask_map</A>
    real (kind=s2_sp), allocatable, dimension (:) :: <A HREF="s2_skymask.html#var_prod_map">prod_map</A>
    logical :: <A HREF="s2_skymask.html#var_display">display</A> = .true.
    integer :: <A HREF="s2_skymask.html#var_npix">npix</A>
    integer :: <A HREF="s2_skymask.html#var_nside">nside</A>
    integer :: <A HREF="s2_skymask.html#var_pix_scheme">pix_scheme</A>
    integer :: <A HREF="s2_skymask.html#var_lmax">lmax</A>
    integer :: <A HREF="s2_skymask.html#var_mmax">mmax</A>
    integer :: <A HREF="s2_skymask.html#var_fail">fail</A>

        ! Subroutines and functions
    subroutine <A HREF="s2_skymask.html#subroutine_parse_options">parse_options</A> ()

end program s2_skymask
</PRE>
 Apply a mask (containing only ones and zeros) to a sky.  The output map is
 the product of the mask and sky maps.  If the display status is set then
 masked pixels of the output map are overwritten with a magic number that
 appears grey when plotted.  Output maps producted with the display option
 set should <STRONG>only</STRONG> be used for display purposes, and <STRONG>not</STRONG> for any
 subsequent analysis.
<P>
 Usage: s2_skymask
   <UL>
   <LI>  [-help]: Display usage information.
   <LI>  [-sky filename_sky]: Name of input file containing sky to mask.
   <LI>  [-mask filename_mask]: Name of input file containined mask to apply.
   <LI>  [-display display]:  Logical specify whether to produce an output
     masked map for displya purposes only, in which case the masked
     values are set to a magic number so that they appear grey when plotted.
   <LI>  [-out filename_out]: Name of output file to write containing masked sky.
   <LI>  [-file_type file_type_str (map or sky)]: String specifying file types.
   <LI>  [-ext ext (optional)]: File extension for map files.
   </UL>
<P>
<STRONG>Author:</STRONG> J. D. McEwen (mcewen@mrao.cam.ac.uk)
<P>
<STRONG>Version:</STRONG> 0.1 - August 2005

<HR><H2> Description of Variables </H2>
<A NAME="var_fits_display_grey_magic_number"><H3>FITS_DISPLAY_GREY_MAGIC_NUMBER</H3></A>
<PRE>real (kind=s2_sp), parameter :: FITS_DISPLAY_GREY_MAGIC_NUMBER = -1.6375e30
</PRE>
<A NAME="var_zero_tol"><H3>ZERO_TOL</H3></A>
<PRE>real (kind=s2_sp), parameter :: ZERO_TOL = 1e-5
</PRE>
<A NAME="var_map_file"><H3>MAP_FILE</H3></A>
<PRE>character (len=*), parameter :: MAP_FILE = 'map'
</PRE>
<A NAME="var_sky_file"><H3>SKY_FILE</H3></A>
<PRE>character (len=*), parameter :: SKY_FILE = 'sky'
</PRE>
<A NAME="var_file_type"><H3>file_type</H3></A>
<PRE>integer :: file_type = S2_SKY_FILE_TYPE_MAP
</PRE>
<A NAME="var_ext"><H3>ext</H3></A>
<PRE>integer :: ext = 1
</PRE>
<A NAME="var_filename_sky"><H3>filename_sky</H3></A>
<PRE>character (len=S2_STRING_LEN) :: filename_sky
</PRE>
<A NAME="var_filename_mask"><H3>filename_mask</H3></A>
<PRE>character (len=S2_STRING_LEN) :: filename_mask
</PRE>
<A NAME="var_filename_out"><H3>filename_out</H3></A>
<PRE>character (len=S2_STRING_LEN) :: filename_out
</PRE>
<A NAME="var_file_type_str"><H3>file_type_str</H3></A>
<PRE>character (len=S2_STRING_LEN) :: file_type_str = MAP_FILE
</PRE>
<A NAME="var_sky"><H3>sky</H3></A>
<PRE>type (s2_sky) :: sky
</PRE>
<A NAME="var_mask"><H3>mask</H3></A>
<PRE>type (s2_sky) :: mask
</PRE>
<A NAME="var_prod"><H3>prod</H3></A>
<PRE>type (s2_sky) :: prod
</PRE>
<A NAME="var_mask_map"><H3>mask_map</H3></A>
<PRE>real (kind=s2_sp), allocatable, dimension (:) :: mask_map
</PRE>
<A NAME="var_prod_map"><H3>prod_map</H3></A>
<PRE>real (kind=s2_sp), allocatable, dimension (:) :: prod_map
</PRE>
<A NAME="var_display"><H3>display</H3></A>
<PRE>logical :: display = .true.
</PRE>
<A NAME="var_npix"><H3>npix</H3></A>
<PRE>integer :: npix
</PRE>
<A NAME="var_nside"><H3>nside</H3></A>
<PRE>integer :: nside
</PRE>
<A NAME="var_pix_scheme"><H3>pix_scheme</H3></A>
<PRE>integer :: pix_scheme
</PRE>
<A NAME="var_lmax"><H3>lmax</H3></A>
<PRE>integer :: lmax
</PRE>
<A NAME="var_mmax"><H3>mmax</H3></A>
<PRE>integer :: mmax
</PRE>
<A NAME="var_fail"><H3>fail</H3></A>
<PRE>integer :: fail
</PRE>

<HR><H2> Description of Subroutines and Functions </H2>
<A NAME="subroutine_parse_options"><H3>parse_options</H3></A>
<PRE>subroutine parse_options ()
    ! Calls: getArgument
end subroutine parse_options
</PRE>
 Parse the options passed when program called.
<P>
<STRONG>Author:</STRONG> J. D. McEwen (mcewen@mrao.cam.ac.uk)
<P>
<STRONG>Version:</STRONG> 0.1 - November 2004
</HTML>
